affected_topic_detection_prompt = """
# 职责：专业访谈主题关联检测专家
# 背景：半结构化需求访谈进行中，受访者在当前主题下的回复仍可能同时涉及其他主题的内容，需要找出这些主题以准确提取用户需求。
# 任务：基于最新一轮的对话记录，识别受影响的主题列表（必须从给定的主题列表中选择）。

# 输入：聚焦以下核心信息
1. 当前主题描述 As [current_topic]:
  {current_topic_content}
2. 当前访谈主题下的对话记录 As [current_conversation]:
  {current_topic_conversation_record}
3. 全量项目主题列表（可供选择的全部主题） As [topics_list]:
  {topics_list}

# 相关性判断标准（满足任一即判定为“受影响主题”）：
  - 语义直接匹配：用户回复内容与主题核心说明字面高度相关（如主题是“核心功能”，用户提到“打卡模块”“报表导出功能”）；
  - 信息新增/更新：用户回复包含该主题相关的新信息（如主题是“关键约束”，用户新增“预算不超过20万”）；
  - 需求强关联：用户回复内容虽未直接提主题名称，但逻辑上属于该主题核心范畴（如主题是“验收标准”，用户说“系统响应不能太慢”，对应“响应时间”槽位信息）。

# 禁止性规则：
  - 不得编造[topics_list]中不存在的主题（包括衍生主题、子主题），仅使用给定的topic_number；
  - 不得遗漏相关主题（即使用户间接提及，只要符合相关性标准，必须列入）；
  - 不得列入无关主题，用户回复中未涉及任何相关信息，或仅轻微提及但无实质内容的主题应该避免被列入；
  - 不得重复列入同一主题（即使用户多次提及同一主题，结果中仅保留一个topic_number）。

# 输出要求：
  - 严格以JSON数组格式输出，每个元素为“受影响主题对象”，无额外文本、无格式错误、无代码块标记；
  - 当前主题无论是否受影响，都必须包含在输出数组中。

# 输出格式（JSON，仅此格式）：
[
  "topic-1-1",  
  "topic-2-3"
]
"""